{"ast":null,"code":"import _defineProperty from\"/home/ubuntu2004/Projets/marvel-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/ubuntu2004/Projets/marvel-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ubuntu2004/Projets/marvel-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{FirebaseContext}from\"../Firebase\";var Signup=function Signup(props){var firebase=useContext(FirebaseContext);var data={pseudo:\"\",email:\"\",password:\"\",confirmPasswor:\"\"};var _useState=useState(data),_useState2=_slicedToArray(_useState,2),loginData=_useState2[0],setLoginData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(e){setLoginData(_objectSpread(_objectSpread({},loginData),{},_defineProperty({},e.target.id,e.target.value)));};// Gestion erreurs\nvar errorMsg=error!==\"\"&&/*#__PURE__*/React.createElement(\"span\",null,error.message);var handleSubmit=function handleSubmit(e){e.preventDefault();var email=loginData.email,password=loginData.password,pseudo=loginData.pseudo;firebase.signupUser(email,password).then(function(authUser){return firebase.user(authUser.user.uid).set({pseudo:pseudo,email:email});}).then(function(){setLoginData(_objectSpread({},data));props.history.push(\"/welcome\");}).catch(function(error){setError(error);setLoginData(_objectSpread({},data));});};var pseudo=loginData.pseudo,email=loginData.email,password=loginData.password,confirmPassword=loginData.confirmPassword;var btn=pseudo===\"\"||email===\"\"||password===\"\"||password!==confirmPassword?/*#__PURE__*/React.createElement(\"button\",{disabled:true},\"Inscrition\"):/*#__PURE__*/React.createElement(\"button\",null,\"Inscrition\");return/*#__PURE__*/React.createElement(\"div\",{className:\"signUpLoginBox\"},/*#__PURE__*/React.createElement(\"div\",{className:\"slContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"formBoxLeftSignup\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"formBoxRight\"},/*#__PURE__*/React.createElement(\"div\",{className:\"formContent\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},errorMsg,/*#__PURE__*/React.createElement(\"h2\",null,\"Inscription\"),/*#__PURE__*/React.createElement(\"div\",{className:\"inputBox\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,value:pseudo,type:\"text\",id:\"pseudo\",required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"pseudo\"},\"Pseudo\")),/*#__PURE__*/React.createElement(\"div\",{className:\"inputBox\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,value:email,type:\"email\",id:\"email\",required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\")),/*#__PURE__*/React.createElement(\"div\",{className:\"inputBox\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,value:password,type:\"password\",id:\"password\",required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Mot de passe\")),/*#__PURE__*/React.createElement(\"div\",{className:\"inputBox\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,value:confirmPassword,type:\"password\",id:\"confirmPassword\",required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"confirmPassword\"},\"Confirmer le mot de passe\")),btn),/*#__PURE__*/React.createElement(\"div\",{className:\"linkContainer\"},/*#__PURE__*/React.createElement(Link,{className:\"simpleLink\",to:\"/login\"},\"D\\xE9ja inscrit? Connectez vous\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{className:\"simpleLink\",to:\"/forgetpassword\"},\"Mot de passe oubli\\xE9 ?\"))))));};export default Signup;","map":{"version":3,"sources":["/home/ubuntu2004/Projets/marvel-test/src/components/Signup/index.js"],"names":["React","useState","useContext","Link","FirebaseContext","Signup","props","firebase","data","pseudo","email","password","confirmPasswor","loginData","setLoginData","error","setError","handleChange","e","target","id","value","errorMsg","message","handleSubmit","preventDefault","signupUser","then","authUser","user","uid","set","history","push","catch","confirmPassword","btn"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FirebaseContext } from \"../Firebase\";\n\nconst Signup = (props) => {\n  const firebase = useContext(FirebaseContext);\n\n  const data = {\n    pseudo: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPasswor: \"\",\n  };\n  const [loginData, setLoginData] = useState(data);\n  const [error, setError] = useState(\"\");\n\n  const handleChange = (e) => {\n    setLoginData({ ...loginData, [e.target.id]: e.target.value });\n  };\n  // Gestion erreurs\n\n  const errorMsg = error !== \"\" && <span>{error.message}</span>;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { email, password, pseudo } = loginData;\n\n    firebase\n      .signupUser(email, password)\n      .then((authUser) => {\n        return firebase.user(authUser.user.uid).set({\n          pseudo,\n          email,\n        });\n      })\n      .then(() => {\n        setLoginData({ ...data });\n        props.history.push(\"/welcome\");\n      })\n      .catch((error) => {\n        setError(error);\n        setLoginData({ ...data });\n      });\n  };\n  const { pseudo, email, password, confirmPassword } = loginData;\n\n  const btn =\n    pseudo === \"\" ||\n    email === \"\" ||\n    password === \"\" ||\n    password !== confirmPassword ? (\n      <button disabled>Inscrition</button>\n    ) : (\n      <button>Inscrition</button>\n    );\n\n  return (\n    <div className=\"signUpLoginBox\">\n      <div className=\"slContainer\">\n        <div className=\"formBoxLeftSignup\"></div>\n        <div className=\"formBoxRight\">\n          <div className=\"formContent\">\n            <form onSubmit={handleSubmit}>\n              {errorMsg}\n              <h2>Inscription</h2>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={pseudo}\n                  type=\"text\"\n                  id=\"pseudo\"\n                  required\n                />\n                <label htmlFor=\"pseudo\">Pseudo</label>\n              </div>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={email}\n                  type=\"email\"\n                  id=\"email\"\n                  required\n                />\n                <label htmlFor=\"email\">Email</label>\n              </div>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={password}\n                  type=\"password\"\n                  id=\"password\"\n                  required\n                />\n                <label htmlFor=\"password\">Mot de passe</label>\n              </div>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={confirmPassword}\n                  type=\"password\"\n                  id=\"confirmPassword\"\n                  required\n                />\n                <label htmlFor=\"confirmPassword\">\n                  Confirmer le mot de passe\n                </label>\n              </div>\n              {btn}\n            </form>\n            <div className=\"linkContainer\">\n              <Link className=\"simpleLink\" to=\"/login\">\n                Déja inscrit? Connectez vous\n              </Link>\n              <br />\n              <Link className=\"simpleLink\" to=\"/forgetpassword\">\n                Mot de passe oublié ?\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}